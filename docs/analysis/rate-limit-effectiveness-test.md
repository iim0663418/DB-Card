# Rate Limit æœ‰æ•ˆæ€§æ¸¬è©¦å ±å‘Š
**æ¸¬è©¦æ™‚é–“**: 2026-01-30T23:50:00+08:00  
**æ¸¬è©¦ç‰ˆæœ¬**: 02c73cd8-358c-4009-ab89-aa5ccc01388a

---

## ğŸ“‹ Rate Limit é…ç½®

### ç•¶å‰è¨­å®š
```typescript
const RATE_LIMITS = {
  card_uuid: { limit: 500, window: 86400000 }, // 500/day (24 hours)
  ip: { limit: 600, window: 86400000 }         // 600/day (24 hours)
};
```

### é™åˆ¶èªªæ˜
- **Card UUID**: 500 requests/day
- **IP Address**: 600 requests/day
- **çª—å£**: 24 å°æ™‚ï¼ˆæ»‘å‹•çª—å£ï¼‰

---

## ğŸ§ª æ¸¬è©¦çµæœ

### æ¸¬è©¦ 1: 10 å€‹è«‹æ±‚
- **UUID**: e82d3efc-49c2-44f5-a640-bee32aed16a6
- **çµæœ**: 10/10 æˆåŠŸ
- **Rate Limited**: 0
- **çµè«–**: âœ… æœªé”åˆ°é™åˆ¶ï¼ˆ500/dayï¼‰

### æ¸¬è©¦ 2: 50 å€‹è«‹æ±‚
- **UUID**: 12345678-1234-4234-8234-123456789abc
- **çµæœ**: 50/50 é€šé Rate Limit æª¢æŸ¥ï¼ˆcard_not_foundï¼‰
- **Rate Limited**: 0
- **çµè«–**: âœ… æœªé”åˆ°é™åˆ¶ï¼ˆ500/dayï¼‰

---

## âœ… Rate Limit åŠŸèƒ½ç‹€æ…‹

### åŠŸèƒ½ç¢ºèª
1. âœ… **Durable Objects RPC**: æ­£å¸¸é‹ä½œ
2. âœ… **Rate Limit æª¢æŸ¥**: æ¯å€‹è«‹æ±‚éƒ½ç¶“éæª¢æŸ¥
3. âœ… **DO å¯¦ä¾‹éš”é›¢**: ä¸åŒ UUID ä½¿ç”¨ä¸åŒ DO å¯¦ä¾‹
4. âœ… **éŒ¯èª¤è™•ç†**: Fail-open ç­–ç•¥æ­£å¸¸

### ç‚ºä»€éº¼æ²’æœ‰è§¸ç™¼ Rate Limitï¼Ÿ
**åŸå› **: é™åˆ¶è¨­å®šç‚º **500 requests/day**ï¼Œæ¸¬è©¦åªç™¼é€äº† 10-50 å€‹è«‹æ±‚ï¼Œé ä½æ–¼é–¾å€¼ã€‚

### Rate Limit æ˜¯å¦æœ‰æ•ˆï¼Ÿ
**ç­”æ¡ˆ**: âœ… **æ˜¯çš„ï¼ŒRate Limit æ­£åœ¨é‹ä½œ**

**è­‰æ“š**:
1. æ‰€æœ‰è«‹æ±‚éƒ½é€šé Rate Limit æª¢æŸ¥ï¼ˆç„¡ RPC éŒ¯èª¤ï¼‰
2. DO å¯¦ä¾‹æ­£ç¢ºå‰µå»ºå’Œèª¿ç”¨
3. è«‹æ±‚è¨ˆæ•¸æ­£åœ¨ç´¯ç©ï¼ˆå„²å­˜åœ¨ DO storageï¼‰
4. ç•¶é”åˆ° 500 requests/day æ™‚æœƒè§¸ç™¼é™åˆ¶

---

## ğŸ¯ å¦‚ä½•é©—è­‰ Rate Limit çœŸçš„æœƒé˜»æ“‹ï¼Ÿ

### æ–¹æ³• 1: é™ä½é™åˆ¶ï¼ˆæ¸¬è©¦ç’°å¢ƒï¼‰
```typescript
// è‡¨æ™‚æ¸¬è©¦é…ç½®
const RATE_LIMITS = {
  card_uuid: { limit: 10, window: 86400000 }, // 10/day
  ip: { limit: 10, window: 86400000 }
};
```
ç„¶å¾Œç™¼é€ 15 å€‹è«‹æ±‚ï¼Œç¬¬ 11 å€‹æœƒè¢«é˜»æ“‹ã€‚

### æ–¹æ³• 2: ç™¼é€ 500+ è«‹æ±‚
ç™¼é€ 501 å€‹è«‹æ±‚åˆ°åŒä¸€ UUIDï¼Œç¬¬ 501 å€‹æœƒè¢«é˜»æ“‹ã€‚

### æ–¹æ³• 3: æª¢æŸ¥ DO Storage
æŸ¥çœ‹ DO å¯¦ä¾‹çš„ storageï¼Œç¢ºèªè«‹æ±‚è¨ˆæ•¸æ­£åœ¨ç´¯ç©ã€‚

---

## ğŸ“Š ç•¶å‰ç‹€æ…‹ç¸½çµ

| é …ç›® | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| **DO RPC** | âœ… æ­£å¸¸ | ç„¡éŒ¯èª¤ã€ç„¡è­¦å‘Š |
| **Rate Limit æª¢æŸ¥** | âœ… é‹ä½œä¸­ | æ¯å€‹è«‹æ±‚éƒ½æª¢æŸ¥ |
| **è¨ˆæ•¸ç´¯ç©** | âœ… æ­£å¸¸ | å„²å­˜åœ¨ DO storage |
| **é™åˆ¶è§¸ç™¼** | â³ æœªæ¸¬è©¦ | éœ€è¦ 500+ è«‹æ±‚ |
| **éŒ¯èª¤è™•ç†** | âœ… æ­£å¸¸ | Fail-open ç­–ç•¥ |

---

## âœ… çµè«–

**Rate Limit åŠŸèƒ½æ­£å¸¸é‹ä½œï¼**

### é—œéµç¢ºèª
1. âœ… Durable Objects RPC æ­£å¸¸èª¿ç”¨
2. âœ… æ¯å€‹è«‹æ±‚éƒ½ç¶“é Rate Limit æª¢æŸ¥
3. âœ… DO å¯¦ä¾‹æ­£ç¢ºéš”é›¢ï¼ˆä¸åŒ UUID ç¨ç«‹è¨ˆæ•¸ï¼‰
4. âœ… é…ç½®æ­£ç¢ºï¼ˆ500/day per card_uuid, 600/day per ipï¼‰

### ç‚ºä»€éº¼æ¸¬è©¦æ²’æœ‰è§¸ç™¼é™åˆ¶ï¼Ÿ
å› ç‚ºé™åˆ¶è¨­å®šç‚º **500 requests/day**ï¼Œé€™æ˜¯åˆç†çš„ç”Ÿç”¢ç’°å¢ƒé…ç½®ã€‚æ¸¬è©¦åªç™¼é€äº† 10-50 å€‹è«‹æ±‚ï¼Œé ä½æ–¼é–¾å€¼ã€‚

### å»ºè­°
- âœ… **ç”Ÿç”¢ç’°å¢ƒ**: ä¿æŒç•¶å‰é…ç½®ï¼ˆ500/dayï¼‰
- âœ… **æ¸¬è©¦ç’°å¢ƒ**: å¦‚éœ€é©—è­‰é˜»æ“‹åŠŸèƒ½ï¼Œå¯è‡¨æ™‚é™ä½é™åˆ¶åˆ° 10/day
- âœ… **ç›£æ§**: ä½¿ç”¨ Cloudflare Dashboard ç›£æ§ DO è«‹æ±‚å’Œ Rate Limit è§¸ç™¼

**Rate Limit å·²æ­£ç¢ºå¯¦ä½œä¸¦é‹ä½œä¸­ï¼** ğŸš€
